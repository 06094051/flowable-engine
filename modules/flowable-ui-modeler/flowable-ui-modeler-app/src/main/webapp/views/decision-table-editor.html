<div class="subheader editor-toolbar" id="editor-header">
    <div class="fixed-container">
        <div class="btn-group">
            <div class="btn-toolbar pull-left" ng-controller="DecisionTableToolbarController" ng-cloak>
                <button id="{{item.id}}"
                        title="{{item.title | translate}}"
                        ng-repeat="item in items"
                        ng-switch on="item.type"
                        class="btn btn-inverse" ng-class="{'separator': item.type == 'separator'}"
                        ng-disabled="item.type == 'separator' || item.enabled == false || (readOnly && item.disableOnReadonly)"
                        ng-click="toolbarButtonClicked($index)">
                    <i ng-switch-when="button" ng-class="item.cssClass" class="toolbar-button" data-toggle="tooltip"
                       title="{{item.title | translate}}"></i>
                    <div ng-switch-when="separator" ng-class="item.cssClass"></div>
                </button>
            </div>
        </div>
        <div class="btn-group pull-right" ng-show="!secondaryItems.length">
            <div class="btn-toolbar pull-right" ng-controller="DecisionTableToolbarController">
                <button title="{{item.title | translate}}" ng-repeat="item in secondaryItems" ng-switch on="item.type"
                        class="btn btn-inverse" ng-class="{'separator': item.type == 'separator'}"
                        ng-disabled="item.type == 'separator' || (readOnly && item.disableOnReadonly)"
                        ng-click="toolbarSecondaryButtonClicked($index)" id="{{item.id}}">
                    <i ng-switch-when="button" ng-class="item.cssClass" class="toolbar-button" data-toggle="tooltip"
                       title="{{item.title | translate}}"></i>
                    <div ng-switch-when="separator" ng-class="item.cssClass"></div>
                </button>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid content decision-table" auto-height offset="40">

    <br/>
    <div class="row">
        <h4>Decision Table Editor</h4>
    </div>

    <div class="decision-table-grid-wrapper" id="decisionTableGrid">
        <hot-table
                hot-id="decision-table-editor"
                settings="hotModel.settings"
                columns="model.columnDefs"
                row-headers="true"
                datarows="currentDecisionTableRules"
                merge-cells="true"
                auto-row-size="'true'"
                on-after-get-col-header=doAfterGetColHeader
                on-modify-col-width=doAfterModifyColWidth
                on-after-render=doAfterRender
                on-after-on-cell-mouse-down=doAfterOnCellMouseDown
                current-row-class-name="'currentRow'"
                height="300">
        </hot-table>
    </div>

    <div class="center grid-controls">
        <div ng-if="currentDecisionTable.inputExpressions.length > 0 || currentDecisionTable.outputExpressions.length > 0">
            <button class="btn btn-default" ng-click="removeRule()"
                    ng-disabled="model.selectedRow === undefined || rulesData.length < 2"
                    translate="DECISION-TABLE-EDITOR.BUTTON-REMOVE-RULE-LABEL"></button>
            <button class="btn btn-default" ng-click="moveRuleUpwards()"
                    ng-disabled="!enableMoveUpwards(model.selectedRule) || readOnly"
                    translate="DECISION-TABLE-EDITOR.BUTTON-MOVE-RULE-UPWARDS-LABEL"></button>
            <button class="btn btn-default" ng-click="moveRuleDownwards()"
                    ng-disabled="!enableMoveDownwards(model.selectedRule) || readOnly"
                    translate="DECISION-TABLE-EDITOR.BUTTON-MOVE-RULE-DOWNWARDS-LABEL"></button>
            <button class="btn btn-default" ng-click="addRule()" ng-disabled="readOnly"
                    translate="DECISION-TABLE-EDITOR.BUTTON-ADD-RULE-LABEL"></button>
            <button type="button" class="btn btn-default" ng-click="dumpData()">dump data to console</button>
        </div>
    </div>
</div>


<script>
    function triggerExpressionEditor(expressionType, expressionPos, newExpression) {
        if (expressionType === 'input') {
            extScope.openInputExpressionEditor(expressionPos, newExpression);
        } else {
            extScope.openOutputExpressionEditor(expressionPos, newExpression);
        }
    }

    function triggerRemoveExpression(expressionType, expressionPos) {
        if (expressionType === 'input') {
            extScope.removeInputExpression(expressionPos);
        } else {
            extScope.removeOutputExpression(expressionPos);
        }
    }
</script>
